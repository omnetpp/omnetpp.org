---
layout: post
title: OMNeT++ 2.3b1 has been released
joomla_id: 3585
joomla_url: "-sp-415530670"
date: 2003-02-15 01:02:19.000000000 +01:00
author: Andras
excerpt: 'With message subclassing now officially supported, documented and tested,
  it marks the beginning of a new era for OMNeT++ simulations. And there much more
  in the package: this release is the probably biggest step forward since OMNeT++
  was made public.&nbsp;Visit the <A href="index.php?option=com_docman&task=cat_view&gid=1">download</A>&nbsp;area.'
category: Software
---
With message subclassing now officially supported, documented and tested, it marks the beginning of a new era for OMNeT++ simulations. And there much more in the package: this release is the probably biggest step forward since OMNeT++ was made public.&nbsp;Visit the <A href="index.php?option=com_docman&task=cat_view&gid=1">download</A>&nbsp;area. <P><FONT face="courier new, courier, mono">Changes since version 2.2 p1,p2,p3 </FONT></P>
<P><FONT face="courier new, courier, mono">OMNeT++ 2.3b1 release (February 2003)<BR>-------------------------------------<BR>Licensing change: The license used in previous versions has been replaced<BR>with a new "Academic Public License" (doc/License). This license gives<BR>noncommercial users rights to use, modify and distribute copies of OMNeT++.<BR>The possibility of using OMNeT++ under the GPL has been removed. Commercial<BR>users of OMNeT++ should obtain a commercial license.<BR><BR>Major changes of this release in nutshell:<BR>- The simulation kernel has been ported to use C++ exceptions and RTTI<BR>&nbsp; (Run-time Type Information) and on Windows, the Fiber API. Also, there<BR>&nbsp; has been extensive internal refactoring and refinement of the APIs.<BR><BR>- The "message subclassing" feature has been officially introduced. It is now<BR>&nbsp; documented in the manual, and used by several sample simulations.<BR><BR>- Added the implementation of several distributions: continuous distributions<BR>&nbsp; gamma, beta, Erlang, chi^2, student-t, Cauchy, triangular, lognormal, Weibull<BR>&nbsp; and Pareto; discrete distributions Bernoulli, binomial, geometric, negbino-<BR>&nbsp; mial and Poisson [contributed by Werner Sandmann and Kay Michael Masslow]. <BR><BR>- Contains an alpha version of the new NED compiler architecture,<BR>&nbsp; built upon XML foundations. This includes a tool for generating<BR>&nbsp; documentation from NED files.<BR><BR>- Akaroa support. Akaroa does MRIP (multiple replications in parallel).<BR><BR>- Tkenv GUI has been polished -- both functionality and usability has been<BR>&nbsp; greatly improved. Plove GUI was also redesigned.<BR><BR>For the list of changes that affect portability of simulation models,<BR>see the new doc/API-Changes.txt file. You can find even more detailed<BR>information in the ChangeLogs of the respective source directories.<BR><BR>A more detailed list of changes follows:<BR><BR>Simulation kernel refactoring:<BR>- On Windows, now Win32 native coroutines are used (Fibers API). This change<BR>&nbsp; made it possible to introduce the use of C++ exceptions.<BR><BR>- Error handling in simulation kernel (and in other libs too) has been ported<BR>&nbsp; to C++ exceptions. This not only resulted in cleaner kernel code, but also<BR>&nbsp; has benefits for you:<BR>&nbsp; * you can now use try-catch for better error handling. The API documentation<BR>&nbsp;&nbsp;&nbsp; describes which methods throw exceptions. The common exception class<BR>&nbsp;&nbsp;&nbsp; is cException.<BR>&nbsp; * methods like end(), endSimulation(), deleteModule() terminate the module<BR>&nbsp;&nbsp;&nbsp; immediately even when called from handleMessage(). In earlier versions,<BR>&nbsp;&nbsp;&nbsp; handleMessage() had to go through in any case.<BR>&nbsp; * you can now safely use C++ libraries that throw exceptions, e.g. STL.<BR>&nbsp; Methods like cSimpleModule::error() and opp_error() are remained for backward<BR>&nbsp; compatibility, but they simply throw cException. opp_warning() remained but<BR>&nbsp; its use is discouraged.<BR><BR>- Use of C++ RTTI (Run-time Type Information). From now on, you can use<BR>&nbsp; dynamic_cast&lt;&gt; in your code, and you don't need to provide a className()<BR>&nbsp; method in your classes (because the kernel can figure it out using typeid<BR>&nbsp; in the base class, cObject).<BR><BR>- Eliminated gcc 3.0.x warnings, and changed to the I/O headers , etc.<BR><BR>- Several smaller auxiliary classes have been turned into inner classes of<BR>&nbsp; their respective 'main' classes. (For example, cQueueIterator became<BR>&nbsp; cQueue::Iterator, sTopoNode became cTopology::Node, etc; full list in<BR>&nbsp; include/ChangeLog.) Compatibility typedefs exist for the old names.<BR><BR>- Cleanup in cObject and cSimulation: several internally used methods have been<BR>&nbsp; eliminated or moved to better places. (For example, inspector-related methods<BR>&nbsp; cObject::inspector() and cObject::inspectorFactoryName() have been removed,<BR>&nbsp; and inspectors are now fully internal matter of Tkenv.)<BR><BR>- Refactoring on dynamic module creation: instead of modtype-&gt;buildInside(mod),<BR>&nbsp; one should now write mod-&gt;buildInside(), which is more natural.<BR>&nbsp; (The former syntax still works -- a cModuleType::buildInside() is still<BR>&nbsp; provided for backward compatibility). buildInside() delegates task to<BR>&nbsp; doBuildInside() (a new method), so it's doBuildInside() which should be<BR>&nbsp; redefined in subclasses, and also nedc generates now doBuildInside() code.<BR><BR>- Container classes are now more consistent in what they do when the requested<BR>&nbsp; object doesn't exist:<BR>&nbsp; * Convention 1: methods returning an object reference (e.g. cPar&amp;) now<BR>&nbsp;&nbsp;&nbsp; always throw an exception if the object is not found. (Until now, some<BR>&nbsp;&nbsp;&nbsp; methods issued a warning and returned null reference, i.e. *(cPar*)NULL).<BR>&nbsp; * Convention 2: methods returning a pointer (e.g. cGate*) return NULL<BR>&nbsp;&nbsp;&nbsp; pointer if the object is not found. (Until now, some methods issued<BR>&nbsp;&nbsp;&nbsp; a warning and returned NULL pointer.)<BR>&nbsp; These conventions necessitated the following changes:<BR>&nbsp; * par() of cModule and cMessage now throws an exception if parameter was not<BR>&nbsp;&nbsp;&nbsp; found. (In simple module code, check for existence of a parameter before<BR>&nbsp;&nbsp;&nbsp; accessing it can now be replaced with try-catch.)<BR>&nbsp; * cModule: cGate *gate() methods no longer issue a warning if the gate is<BR>&nbsp;&nbsp;&nbsp; not found, just return NULL.<BR>&nbsp; * cArray::remove(cObject *) and cQueue::remove(cObject *) methods<BR>&nbsp;&nbsp;&nbsp; now return NULL instead of the original pointer if the object was<BR>&nbsp;&nbsp;&nbsp; not found.<BR><BR>- cPar can now use compiled expressions subclassed from cDoubleExpression (a<BR>&nbsp; new class). This is needed for code generated by the new nedtool.<BR><BR>- cSimulation changes:<BR>&nbsp; * lastModuleIndex() renamed to lastModuleId();<BR>&nbsp; * operator[] deprecated (use module(int) method instead)<BR>&nbsp; * del() renamed to deleteModule(); add() renamed to addModule()<BR><BR>- Channels are now represented by real objects (subclassed from cChannel)<BR>&nbsp; rather than parameters in cGate. Channels can be assigned to connections<BR>&nbsp; via cGate's setChannel() method; at the same time, DEPRECATED cGate's<BR>&nbsp; setDelay(), setError(), setDatarate(), setLink() methods (these attributes<BR>&nbsp; should be set on the channel object).<BR><BR>- cSubModIterator: operator[] deprecated (use operator()(int) method instead)<BR><BR>- For further, more internal changes and for more details on the above changes<BR>&nbsp; see include/ChangeLog and src/sim/ChangeLog.<BR><BR>Simulation kernel new features:<BR>- Added convenience functions to cGate, cMessage, and cArray (see<BR>&nbsp; API-Changes.txt for details).<BR><BR>- A new utility class cDisplayStringParser lets you easily manipulate display <BR>&nbsp; strings.<BR><BR>Message subclassing, new NED compiler architecture:<BR>- The Perl-based message compiler opp_msgc is now available in bin/. Message<BR>&nbsp; subclassing is documented in the manual, and it is demonstrated by several<BR>&nbsp; sample simulations. 40+ test cases deal with testing the generated code.<BR><BR>- Added nedtool, the new NED and message compiler (alpha). nedtool converts<BR>&nbsp; NED from/to XML, providing much better integration possibilities (for example<BR>&nbsp; it is now possible to use XML/XSLT to generate NED topologies from external<BR>&nbsp; data sources -- or to extract NED info to arbitrary XML format.)<BR><BR>- Added nedxml library (the library under nedtool) to src/, and its API-doc<BR>&nbsp; to doc/nedxml-api.<BR><BR>Manual:<BR>- Manual source has been converted from Word to Latex [thanks to Ulrich Kaage<BR>&nbsp; for this non-trivial and time consuming task!]. He also added an Index.<BR>&nbsp; HTML conversion (using L2H, by myself) is not 100% yet, you should regard<BR>&nbsp; the PDF as the authoritative form.<BR><BR>- New chapter about message subclassing, plus various updates, fixes and<BR>&nbsp; clarifications [thanks to Phillip Feldman for his comments]<BR><BR>Build:<BR>- In addition to Cygwin, the MinGW compiler is now also supported in Windows.<BR>&nbsp; Older Cygwin versions with the 2.95.x compiler cannot be used any more.<BR><BR>- Improved MSVC support: opp_nmakemake creates MSVC makefiles; running the<BR>&nbsp; test suite now works smoothly with MSVC; opp_stacktool displays reserved<BR>&nbsp; stack size for executables.<BR><BR>- MSVC projects now need *different* compiler flags. Every source should be <BR>&nbsp; compiled with exceptions enabled and using /GR, otherwise there will be RTTI<BR>&nbsp; exceptions. Because of the Fiber API, reserved stack size should be set to<BR>&nbsp; a low value, 64K.<BR><BR>- New utilities (Unix, MSVC): opp_neddoc creates HTML documentation for NED<BR>&nbsp; files; opp_neddocall creates HTML documentation for all nedfiles in a<BR>&nbsp; directory tree; splitvec to split output vector files.<BR><BR>- There are new targets in Makefiles that are generated by opp_makemake:<BR>&nbsp; Target neddoc.html generates a file named neddoc.html by using the<BR>&nbsp; opp_neddoc tool on all NED files. Target htmldocs generates HTML<BR>&nbsp; documentation of all source files (*.h and *.cc) using Doxygen. The<BR>&nbsp; HTML files are placed into the sub-directory ./htmldoc. Also, Makefile<BR>&nbsp; now generates ../doc/api/tags. This tag file can be included when generating<BR>&nbsp; model documentation.<BR><BR>- Improved configure script. Now we support Tk8.4, and also optional packages<BR>&nbsp; like Akaroa.<BR><BR>- Test suite: the number of test cases has grown from 19 to about 120 since<BR>&nbsp; omnetpp-2.2; now it covers a bigger part of the core functionality (modules,<BR>&nbsp; messages, queues, parameter) as well as message subclassing and some aspects<BR>&nbsp; of NED and Cmdenv. Tests for the distributions are in test/distr.<BR><BR>GNED, Plove:<BR>- The Plove GUI has been redesigned, with focus on intuitiveness and usability.<BR>&nbsp; It also features icon toolbars, tooltips and more self-explanatory dialogs.<BR><BR>- The number of module icons available for simulations has grown from 41 to ~90<BR>&nbsp; since the 2.2 release. GNED also has an improved icon selector dialog now.<BR><BR>- There have been other small fixes and improvements in GNED, e.g. fixed the<BR>&nbsp; bug which caused display strings always being added to connections.<BR><BR>- All Tk GUIs now make use of the combobox widget from Bryan Oakley.<BR><BR>Envir changes (apply both to Cmdenv and Tkenv):<BR>- Integrated Steffen Sroka's Akaroa extension that supports multiple<BR>&nbsp; independent replicated simulation runs.<BR>&nbsp; Akaroa can be activated by specifying<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [General]<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; outputvectormanager-class=AkOutputVectorManager<BR>&nbsp; in the ini file. By default, all output vectors are under Akaroa<BR>&nbsp; control; the ..akaroa=false setting can be used<BR>&nbsp; to make Akaroa ignore specific vectors. For more info see the Akaroa<BR>&nbsp; home page and the OMNeT++ documentation.<BR><BR>- Added fname-append-host=yes/no ini file setting. When turned on, appends<BR>&nbsp; the host name to the names of the output<BR>&nbsp; files (output vector, output scalar, snapshot files). This is<BR>&nbsp; useful when the simulation is run on multiple machines concurrently<BR>&nbsp; (parallel independent runs (Akaroa) or parallel/distributed simulation),<BR>&nbsp; and all running instances write to the same directory (e.g. shared<BR>&nbsp; via NFS mount). [Idea from Steffen Sroka's Akaroa extension]<BR><BR>- 2 bugfixes: (1) output scalar file did not get opened sometimes; (2) output<BR>&nbsp; scalar file got removed between runs<BR><BR>Cmdenv:<BR>- Cmdenv can now display various performance measures like event/sec,<BR>&nbsp; event/simsec, simsec/sev, number of message objects, etc. during execution,<BR>&nbsp; so you can compare Tkenv and Cmdenv performances.<BR><BR>- The omnetpp.ini entries that control Cmdenv execution mode and amount of<BR>&nbsp; printed info have been changed. An express-mode=yes/no (default: no) switch<BR>&nbsp; has been introduced, with a meaning similar to Tkenv. Normal mode<BR>&nbsp; (express-mode=no) can be controlled with the module-messages=yes/no,<BR>&nbsp; event-banners=yes/no, and message-trace=yes/no entries (the third adds new<BR>&nbsp; functionality), while express mode is affected by the status-frequency=<BR>&nbsp; , performance-display=yes/no entries. autoflush=yes/no has<BR>&nbsp; also been added. The display-update=, verbose-simulation= entries are now<BR>&nbsp; obsolete.<BR><BR>- The -h command-line switch now lists all networks and modules linked into<BR>&nbsp; the executable.<BR><BR>Tkenv:<BR>- Inspector windows are now restored from a ./.tkenvrc file if you restart the<BR>&nbsp; simulation. More precisely: as soon as an inspected object (identified by<BR>&nbsp; fullpath and classname) gets created in the simulation, its window pops up.<BR>&nbsp; Objects must have unique names for this to work properly! [Thanks to Nicky<BR>&nbsp; Van Foreest for the idea]<BR><BR>- For better navigation of simulation objects, an object tree view has been<BR>&nbsp; added to the left side of the main window. It can be turned off from the<BR>&nbsp; toolbar for performance.<BR><BR>- Inspector windows have been re-though to make them more intuitive, consistent<BR>&nbsp; and informative. All inspector windows now feature an inspector bar with<BR>&nbsp; object fullpath, classname and pointer value (useful for debugging), and a<BR>&nbsp; color code to make it easier to match different inspectors of the same<BR>&nbsp; object. Axis labelling have been added to output vector inspectors.<BR>&nbsp; Added tooltips to graphical module inspectors, speeded up animation of on<BR>&nbsp; very long connection arrows, and refined functionality of the Step icon<BR>&nbsp; into 3 distinct icons ("Run until next local event", "Fast", "Stop").<BR><BR>- Improved File|New run and New network dialogs (now also available from the<BR>&nbsp; toolbar) offer choice from a combobox. Other improvements: main text window<BR>&nbsp; is now cleared when simulation is restarted; more tooltips &amp; toolbar icons;<BR>&nbsp; better output in Message Trace window; increased event number status bar<BR>&nbsp; field width by 3 digits (it was limited in size to 1.000.000 events);<BR><BR>- With "ring" layout, changed display order of modules from clockwise to the<BR>&nbsp; more natural counter-clockwise.<BR><BR>- Extensive internal refactoring mostly because of the introduction exception<BR>&nbsp; handling and reorganization of inspector registration and creation.<BR><BR>Sample simulations:<BR>- HCube, Token Ring and Dyna2 now use message subclassing. Token Ring has<BR>&nbsp; also been significantly revised. The PVMEx example has been removed.<BR><BR>- A new example simulation Topo has been created to demonstrate NED features.<BR>&nbsp; Currently it shows how to build various parametric topologies (chain, mesh,<BR>&nbsp; ring, star, random graph, binary tree, hexagonal grid) using NED.<BR><BR><BR></FONT></P>
